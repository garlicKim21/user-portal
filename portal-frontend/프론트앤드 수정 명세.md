# 빅데이터 분석 플랫폼 사용자 포털 명세서

## 1. 프로젝트 개요

### 1.1 목적
개발자 및 빅데이터 분석가를 위한 통합 포털로, 다양한 개발 도구와 분석 플랫폼에 대한 단일 접점을 제공합니다.

### 1.2 주요 특징
- **다중 프로젝트 지원**: 사용자가 여러 프로젝트에 동시 소속 가능
- **LDAP 기반 권한 관리**: `dataops/{프로젝트}/{권한}` 구조
- **통합 도구 접근**: Grafana, Terminal, Jenkins, ArgoCD 등 개발 도구 통합
- **프로젝트 컨텍스트 전환**: 실시간 프로젝트 변경 및 컨텍스트 유지

### 1.3 기술 스택
- **Frontend**: React 18 + TypeScript
- **Styling**: Tailwind CSS v4 + shadcn/ui 컴포넌트
- **State Management**: React useState (로컬 상태)
- **Icons**: Lucide React
- **Build Tool**: Vite (추정)

## 2. 아키텍처 구조

### 2.1 컴포넌트 계층 구조
```
App.tsx (루트)
├── LoginPage.tsx (인증되지 않은 상태)
└── Dashboard.tsx (인증된 상태)
    ├── ProjectSelector.tsx (프로젝트 선택 드롭다운)
    └── UserInfo.tsx (사용자 정보 팝오버)
```

### 2.2 상태 관리
```typescript
interface AuthState {
  user: User | null;           // 현재 로그인된 사용자
  currentProject: UserProject | null; // 선택된 프로젝트
}
```

### 2.3 데이터 흐름
1. **로그인**: LoginPage → App (사용자명 전달)
2. **프로젝트 선택**: ProjectSelector → App → Dashboard
3. **로그아웃**: UserInfo → App (상태 초기화)

## 3. 데이터 구조

### 3.1 사용자 타입 정의 (`/types/user.ts`)
```typescript
interface UserProject {
  id: string;        // 프로젝트 고유 ID (예: 'fdc', 'eds')
  name: string;      // 프로젝트 표시명 (예: 'FDC 프로젝트')
  role: 'dev' | 'adm' | 'viewer'; // LDAP 권한 코드
  roleLabel: string; // 권한 표시명 (예: '개발자', '관리자')
}

interface User {
  id: string;        // 사용자 고유 ID
  username: string;  // 로그인 사용자명
  name: string;      // 실제 이름
  projects: UserProject[]; // 소속 프로젝트 목록
}

interface AuthState {
  user: User | null;
  currentProject: UserProject | null;
}
```

### 3.2 Mock 데이터 구조
```typescript
const mockUser: User = {
  id: 'john.doe',
  username: 'john.doe',
  name: '김개발',
  projects: [
    { id: 'fdc', name: 'FDC 프로젝트', role: 'dev', roleLabel: '개발자' },
    { id: 'eds', name: 'EDS 프로젝트', role: 'adm', roleLabel: '관리자' },
    { id: 'mkt', name: 'MKT 프로젝트', role: 'dev', roleLabel: '개발자' }
  ]
};
```

## 4. 주요 기능

### 4.1 인증 시스템
- **로그인 페이지**: 사용자명/비밀번호 입력
- **자동 사용자 매칭**: 로그인 시 mock 사용자 데이터 로드
- **기본 프로젝트 설정**: 첫 번째 프로젝트를 기본값으로 설정

### 4.2 프로젝트 관리
- **프로젝트 선택기**: 검색 가능한 드롭다운 메뉴
- **실시간 컨텍스트 전환**: 선택 즉시 UI 전체 업데이트
- **권한 표시**: 각 프로젝트별 권한을 배지로 시각화

### 4.3 사용자 정보 관리
- **사용자 정보 팝오버**: 클릭 시 상세 정보 표시
- **소속 프로젝트 목록**: 모든 프로젝트와 권한 정보
- **LDAP 그룹 정보**: `dataops/{프로젝트}/{권한}` 형식으로 표시

### 4.4 도구 통합
```typescript
const menuItems = [
  {
    id: 'grafana',
    name: 'Grafana',
    icon: BarChart3,
    url: '#grafana',
    description: 'Grafana 대시보드에 연결됩니다. 데이터 시각화 및 모니터링을 위한 도구입니다.'
  },
  // ... 기타 도구들
];
```

## 5. UI/UX 설계

### 5.1 레이아웃 구조
```
┌─────────────────────────────────────────────────────────┐
│ 상단 바 (Header)                                         │
│ ┌─────────────┐ ┌──────────────┐ ┌─────────────────────┐ │
│ │ 대시보드 타이틀 │ │ 프로젝트 선택기 │ │ 사용자 정보 + 로그아웃 │ │
│ └─────────────┘ └──────────────┘ └─────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────────────────────────────┐ │
│ │             │ │                                     │ │
│ │   사이드바    │ │          메인 콘텐츠 영역             │ │
│ │             │ │                                     │ │
│ │ • Grafana   │ │                                     │ │
│ │ • Terminal  │ │                                     │ │
│ │ • Jenkins   │ │                                     │ │
│ │ • ArgoCD    │ │                                     │ │
│ │             │ │                                     │ │
│ │ [프로젝트정보] │ │                                     │ │
│ └─────────────┘ └─────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 5.2 사이드바 기능
- **축소/확장 가능**: 토글 버튼으로 너비 조절 (64px ↔ 256px)
- **메뉴 아이템**: 아이콘 + 텍스트 형태의 버튼
- **현재 프로젝트 정보**: 하단에 선택된 프로젝트 표시
- **활성 메뉴 표시**: 선택된 메뉴 하이라이트

### 5.3 반응형 디자인
- **데스크톱 우선**: 주로 데스크톱 환경에서 사용
- **최소 너비**: 사이드바 + 콘텐츠 영역 고려한 설계
- **Tailwind 클래스**: 반응형 클래스 활용 가능

## 6. 컴포넌트 상세

### 6.1 App.tsx (루트 컴포넌트)
**책임**: 전역 상태 관리, 라우팅 로직
**주요 상태**: `AuthState` (user, currentProject)
**주요 함수**:
- `handleLogin(username)`: 로그인 처리 및 기본 프로젝트 설정
- `handleLogout()`: 상태 초기화
- `handleProjectChange(project)`: 프로젝트 컨텍스트 변경

### 6.2 LoginPage.tsx
**책임**: 사용자 인증 UI
**Props**: `{ onLogin: (username: string) => void }`
**기능**: 사용자명/비밀번호 폼, 간단한 유효성 검사

### 6.3 Dashboard.tsx
**책임**: 메인 대시보드 UI 및 네비게이션
**Props**: `{ user, currentProject, onProjectChange, onLogout }`
**주요 상태**:
- `activeMenu`: 현재 선택된 메뉴 ID
- `sidebarOpen`: 사이드바 확장/축소 상태

### 6.4 ProjectSelector.tsx
**책임**: 프로젝트 선택 드롭다운
**Props**: `{ projects, currentProject, onProjectChange }`
**기능**: 
- Command 컴포넌트 기반 검색 가능한 드롭다운
- 권한별 배지 표시 (adm: destructive, dev: default, viewer: secondary)

### 6.5 UserInfo.tsx
**책임**: 사용자 정보 표시 및 로그아웃
**Props**: `{ user, onLogout }`
**기능**:
- 사용자명 표시 버튼
- 클릭 시 팝오버로 상세 정보 표시
- 모든 소속 프로젝트와 LDAP 그룹 정보 표시

## 7. 스타일링 시스템

### 7.1 Tailwind CSS v4 설정
- **CSS 변수 기반**: 라이트/다크 테마 지원
- **커스텀 사이드바 토큰**: `--sidebar-*` 변수들
- **타이포그래피**: 자동 적용되는 기본 폰트 설정

### 7.2 주요 색상 토큰
```css
--sidebar: oklch(0.985 0 0);                    /* 사이드바 배경 */
--sidebar-foreground: oklch(0.145 0 0);         /* 사이드바 텍스트 */
--sidebar-primary: #030213;                     /* 활성 메뉴 배경 */
--sidebar-accent: oklch(0.97 0 0);             /* 호버 상태 배경 */
```

## 8. 확장 가능성

### 8.1 권한 시스템 확장
현재는 UI에서 권한 제어를 하지 않지만, 필요시 다음과 같이 확장 가능:
```typescript
// 권한 기반 메뉴 접근 제어 (예시)
const hasAccess = (menuId: string, requiredRoles?: string[]) => {
  if (!currentProject || !requiredRoles) return true;
  return requiredRoles.includes(currentProject.role);
};
```

### 8.2 API 통합
현재 Mock 데이터 사용 중이지만, 실제 API 연동 시:
```typescript
// 실제 API 호출로 대체 가능한 부분들
const handleLogin = async (username: string, password: string) => {
  const response = await authAPI.login(username, password);
  const user = await userAPI.getUserInfo(response.token);
  // ...
};
```

### 8.3 라우팅 시스템
현재는 단순 상태 기반이지만, React Router 등으로 확장 가능:
```typescript
// 예시: 메뉴별 라우팅
const menuItems = [
  { id: 'grafana', path: '/grafana', component: GrafanaPage },
  // ...
];
```

## 9. 개발 가이드라인

### 9.1 코딩 규칙
- **TypeScript 엄격 모드**: 모든 타입 정의 필수
- **컴포넌트 분리**: 단일 책임 원칙 준수
- **Props 인터페이스**: 모든 컴포넌트에 Props 타입 정의
- **상태 최소화**: 필요한 곳에만 상태 정의

### 9.2 파일 구조 규칙
```
/components/          # 재사용 가능한 컴포넌트
  /ui/               # shadcn/ui 컴포넌트 (수정 금지)
  /figma/            # Figma 관련 컴포넌트
/types/              # TypeScript 타입 정의
/styles/             # 글로벌 CSS
```

### 9.3 네이밍 컨벤션
- **컴포넌트**: PascalCase (예: `ProjectSelector`)
- **함수**: camelCase (예: `handleLogin`)
- **타입/인터페이스**: PascalCase (예: `UserProject`)
- **상수**: UPPER_SNAKE_CASE (예: `MOCK_USER`)

## 10. 배포 및 운영

### 10.1 환경 설정
- **개발**: Mock 데이터 사용
- **스테이징**: 테스트 LDAP 서버 연동
- **프로덕션**: 실제 LDAP 및 도구 서버 연동

### 10.2 보안 고려사항
- **LDAP 인증**: 실제 환경에서는 secure token 기반 인증 구현
- **HTTPS 필수**: 모든 외부 도구 연동 시 HTTPS 사용
- **세션 관리**: 적절한 세션 타임아웃 설정